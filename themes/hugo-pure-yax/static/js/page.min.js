function show_hide(e,t){"none"==document.getElementById(e).style.display?(document.getElementById(e).style.display="",document.getElementById(t).style.display="none"):document.getElementById(e).style.display="none"}function initialize_comments(){stacosys_get_count(STACOSYS_PAGE,null,init_success,init_failure)}function init_success(e,t,n){var o=JSON.parse(n).count;o>0&&(o>1&&(document.getElementById("show-comment-label").innerHTML="Voir les "+o+" commentaires"),document.getElementById("show-comments-button").style.display=""),console.log("initialization success")}function init_failure(e){console.log("initialization failure")}function get_comments_count(e,t){stacosys_get_count(e,t,count_success,count_failure)}function count_success(e,t,n){var o=JSON.parse(n).count;o>0?(t.innerHTML=o>1?'<i class="fa fa-comment fa-md"></i> '+o+" commentaires":'<i class="fa fa-comment fa-md"></i> '+o+" commentaire",t.style.display=""):t.innerHTML="0",console.log("initialization success")}function count_failure(e){console.log("get comments count failure")}function show_comments(){stacosys_load_comments(STACOSYS_PAGE,loading_success,loading_failure)}function loading_success(e,t,n){for(var o=JSON.parse(n),s=0,c=o.data.length;s<c;++s)o.data[s].mdcontent=markdown.toHTML(o.data[s].content);show_hide("stacosys-comments","show-comments-button");var i=document.getElementById("stacosys-template").innerHTML,a=new Array;a.push("[["),a.push("]]"),Mustache.parse(i,a);var u=Mustache.render(i,o);document.getElementById("stacosys-comments").innerHTML=u}function loading_failure(e){console.log("loading failure")}function new_comment(){var e=document.getElementById("author").value,t=document.getElementById("email").value,n=document.getElementById("site").value,o=document.getElementById("captcha").value,s=document.getElementById("subscribe").checked,c=document.getElementById("message").value;e&&c&&stacosys_new_comment(STACOSYS_PAGE,e,t,n,o,s,c,submit_success,submit_failure)}function submit_success(e,t){console.log("submit "+t),window.location="/2009/redirection"}function submit_failure(e){console.log("submit failure")}function preview_markdown(){"none"==document.getElementById("preview-container").style.display&&(document.getElementById("preview-container").style.display="");var e=function(e){return document.getElementById(e)};new Editor(e("message"),e("preview"))}function Editor(e,t){this.update=function(){t.innerHTML=markdown.toHTML(e.value)},e.editor=this,this.update()}
